# Space time forecast

## Overview

Given a set of counts at locations per n time periods, the algorithm
will forecast the number at time n+1

### Applicable Scenarios and Problems

Forecasting counts of an event (e.g. numbers of disease cases, numbers
of tests used) where locations are known and data are available for
multiple time periods.

## Usage

```r
[[][[],[[][1,]][[[3,[[[[][[][[]]]]]]],],],],],,],
```

```shell
curl -X POST -d '{ 
    "count_data": {
	    "site": [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],
	    "count": [0,55,0,2,14,1,1,25,3,20,1,2,104,2,25,4,0,5,0,4,1,57,0,6,8,5,1,64,5,9,1,9,105,13,45,153,0,3,0,27,1,15,3,3,81,85,5,13,85,2,3,2,109,1,52,51,0,109,0,10,3,29,1,19,102,20,3,26,6,163,6,0,102,3,8,125,1,3,0,23,1,3,3,31,112,41,0,9,1,2,3,1,242,1,9,39,0,4,0,2,2,7,1,3,24,3,1,8,2,2,48,2,80,2,3,33,2,3,0,4,6,2,23,10,16,7,2,2,1,1,9,1,2,3,21,50,0,4,1,1,1,2,1,9,30,6,3,5,1,10,3,9,16,1,6,23,3,1,1,4,22,1,14,0,6,1,4,1,1,2,6,0,5,1,1,29,2,3,5,4,2,0,65,2,51,4,7,0,3,1,0,0,1,4,0,94,4,3,1,4,9,3,6,6,7,36,3,9,2,5,0,1,4,10,4,13,1,2,1,14],
	    "time": [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11]
    }, 
    "coordinates": {
	    "site": [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],
	    "lat": [0.491,6.152,0.44,10.16,0.025,3.283,7.864,19.314,10.527,11.817,14.553,14.724,4.757,12.154,6.445,0.425,4.986,18.651,5.035,17.528],
	    "lng": [19.889,1.207,18.913,16.144,3.872,15.441,18.004,10.444,0.567,9.164,17.515,13.277,6.015,2.992,0.5,5.023,18.631,12.202,19.611,17.294]
     }
}' 
-H 'Content-Type: application/json' https://algo-api-demo.disarm.io/v1/algo/hughsturrock/space_time_forecast/0.1.0
```

> The above command sends back

```json
{
  "forecast": {
    "1": 4.06148880649429,
    "2": 1.87313708906616,
    "3": 17.6520831595009,
    "4": 6.38190166049017,
    "5": 21.7620891705731,
    "6": 116.489270840226,
    "7": 2.49322698767439,
    "8": 13.2235486888957,
    "9": 0.764111083197624,
    "10": 5.50372516295147,
    "11": 0.695240362744766,
    "12": 0.01354338474262,
    "13": 17.2251419966051,
    "14": 25.3991316873619,
    "15": 0.386831669461889,
    "16": 26.4535963046688,
    "17": 1.36067080134664,
    "18": 0.737492719891929,
    "19": 0.187652867208015,
    "20": 22.8889756165056
  },
  "site": [
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9,
    10,
    11,
    12,
    13,
    14,
    15,
    16,
    17,
    18,
    19,
    20
  ]
}
```

### Input

Requires nested json of 2 tables.

The first table should be named 'count\_data' and should contain 3
fields:

1.  'site' a numeric or character ID for each site
2.  'count' the number of the outcome/events
3.  'time' the time period in whole integers. These donâ€™t have to be
    equally spaced.

The second table should be named 'coordinates' and should contain 3
fields:

1.  'site' a numeric or character ID for each site. Must contain all the
    sites present in the 'count\_data' table
2.  'lng' the longitude of each site
3.  'lat' the latitude of each site

### Output

A json containing 2 fields

1.  'site' the site ID
2.  'forecast' the predicted number of events in time n+1
